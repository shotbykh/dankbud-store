# üó∫Ô∏è DankBud System Manual

**Version**: 1.0.1
**Status**: Live / Beta

---

## 1. üèóÔ∏è Site Architecture (Sitemap) (High-Level View)

### Public Facade
*   **`/` (Home)**: The "Acid Festival" landing page. Brand vibe, "Join the Club" CTA.
*   **`/apply` (Application)**: Simple form for new members (ID, Phone, Name).
*   **`/login` (Gate)**: Passwordless login (using Member ID/Email).

### Members Only (The Club)
*   **`/shop` (The Stash)**: Grid view of available cannabis products.
*   **`/shop/[id]` (Product Detail)**: Specific strain info, effects, and "Add to Stash".
*   **`/checkout` (The Deal)**:
    *   **Features**: Address input, Delivery/Collect toggle, Payment method (EFT/Cash).
    *   **Logic**: Auto-attaches Member ID from local storage.
*   **`/checkout/success` (Confirmation)**: Order secured page with Banking Details.

### Operations (Staff Only)
*   **`/admin/orders` (Logistics Console)**:
    *   **Purpose**: View all active orders, packing slips, and delivery details.
    *   **Tech**: Connects DIRECTLY to the database (Real-time).
*   **`/admin` (Command Center)**: *Alternative/Legacy dashboard view.*

---

## 2. ÔøΩÔøΩ User Flows

### A. The "New Guy" Flow
1.  Land on Homepage -> "Join the Club".
2.  Fill out `/apply` -> Data saved to `db.json` -> Redirect to Login.
3.  Login with Email/ID -> Cookie set + LocalStorage set.
4.  Redirect to `/shop`.

### B. The "Shopping" Flow
1.  Browse `/shop` -> Click Product -> Add to Cart.
2.  Open Cart Drawer -> Click "Checkout".
3.  **Checkout Page**:
    *   **Delivery**: Enter address (PE Only).
    *   **Collect**: Address hides, shows "Walmer" info.
    *   **Pay**: Select EFT (See Bank Details) or Cash.
4.  **Place Order**:
    *   System validates session.
    *   Order saved as `PENDING`.
    *   Redirect to `/checkout/success` -> Shows proper Banking Ref (e.g., `ORD-123456`).

---

## 3. üëÆ‚Äç‚ôÇÔ∏è Admin & Staff Protocols

### The Daily Routine
**URL**: [`/admin/orders`](http://localhost:3000/admin/orders)

1.  **Monitor**: Refresh the page to see new **ORANGE (PENDING)** orders.
2.  **Verify**:
    *   **EFT**: Check FNB app for `Ref: ORD-XXXXXX`.
    *   **Cash**: Note "COD" on the packing slip.
3.  **Pack**:
    *   Read "Packing Slip" column (e.g., "2x 5g White Russian").
    *   Weigh, Bag, Seal.
4.  **Dispatch**:
    *   **Delivery**: Hand to Driver with address screenshot.
    *   **Collect**: Place in collection bin.
    *   *Note: Currently, status updates (Paid/Dispatched) are manual or handled via the Command Center `/admin`. We can unify this soon.*

---

## 4. üëª Ghost Page Report (Cleanup Recommended)

These files appear to be unused or redundant. Removing them will keep the codebase clean.

| File Path | Status | Recommendation |
| :--- | :--- | :--- |
| `src/app/api/checkout/route.ts` | **DEAD** | We use `/api/orders` now. **DELETE**. |
| `src/app/admin/page.tsx` | **REDUNDANT** | This was the "Command Center". If you prefer the look of `/admin/orders`, we should move that code here or delete this. |
| `src/app/api/admin/orders/route.ts` | **MAYBE DEAD** | Only used by the "Command Center" (`/admin`). The "Logistics Console" (`/admin/orders`) fetches data directly. |

---

## 5. üõ†Ô∏è Tech Stack Summary
*   **Framework**: Next.js 15 (App Router).
*   **Styling**: Tailwind CSS + "Acid Bento" Design System.
*   **Database**: `db.json` (Local JSON file). *Note: Will need a real DB (Postgres/Supabase) for production scaling.*
*   **Auth**: Custom "Session Cookie" + "Header Fallback" (Robust).

---
*Generated by Antigravity AI*
